{% load notifications_tags %}
{% notifications_unread as unread_count %}

<div class="wrapper">

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand-md navbar-light navbar-white">
        <div class="container">
            <!-- Right navbar links -->
            <ul class="order-1 order-md-3 navbar-nav navbar-no-expand ml-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-bell"></i>
                        {% if unread_count %}
                        <span class="badge badge-warning navbar-badge">
                            {{ unread_count }}</span>{% endif %}
                    </a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <span class="dropdown-item dropdown-header">{% if unread_count %}{{ unread_count }}条通知{% else %}
                            暂无通知{% endif %}</span>
                        <div class="dropdown-divider"></div>
                        {% if unread_count %}
                        <a href="{% url " userProfile:user_notifications" %}" class="dropdown-item">
                            <i class="fa fa-comment"></i> {{ unread_count }} 条未读通知
                        </a>
                        {% endif %}
                        <div class="dropdown-divider"></div>
                        <a href="{% url " userProfile:user_notifications" %}"
                            class="dropdown-item dropdown-footer">查看所有<i class="fas fa-arrow-circle-right"></i></a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    {% for notice in unread_list %}
    {% if notice.description == "sp" %}
    <tr>
        <td class="mailbox-star">
            <i class="fas fa-star text-{{ notice.action_object.price }}"></i>
        </td>
        <td class="mailbox-name">
            <a><b class="text-primary">{{ notice.verb }}</b></a>
        </td>
        <td class="mailbox-subject">
            您收到了来自<bclass="text-success">{{ notice.actor }}</b>的{{ notice.verb }}
        </td>
        <td class="mailbox-date">
            <b>{{ notice.timestamp }}</b>
        </td>
        <td class="mailbox-attachment">
            <a href="{% url 'userProfile:approval_details' %}?id=
                {{notice.target.object_id }}&type={{ notice.target.type }}" title="查看">
                <span class="text-primary"><i class="fas fa-paperclip"></i></span>
            </a>
        </td>
        <td class="mailbox-attachment">
            <a href="{% url " userProfile:user_change_unread" %}?notice_id={{ notice.id }}" title="已读"><span
                    class="text-success"><i class="fa fa-check"></i>
                </span></a>
        </td>
    </tr>
    {% endif %}
    {% endfor %}

    <!-- 单条带id的请求 -->
    <td class="mailbox-attachment">
        <a href="{% url " userProfile:user_change_unread" %}?notice_id={{ notice.id }}" title="已读"><span
                class="text-success"><i class="fa fa-check"></i></span></a>
        /td>

        <!-- 全部不带id的请求 -->
        <button type="button" class="btn btn-tool">
            <a href="{% url " userProfile:user_change_unread" %}" class="text-success font-weight-bold">
                <i class="fa fa-check"></i>全部已读
            </a>
        </button>